export type CardValue = '1' | '2' | '3' | '5' | '8' | '13' | '21' | '?' | 'â˜•';

export interface Player {
  id: string;
  name: string;
  vote?: CardValue | null;
  isHost: boolean;
  joinedAt: number; // Timestamp for host succession order
  isDisconnected?: boolean; // Flag for disconnected state (when tab closes)
  health: number; // Player health (0-100), decreases when hit by emojis
  isKnockedOut?: boolean; // True when health reaches 0, triggers flicker animation
  lastHitTimestamp?: number; // Timestamp of last hit, used to fade out health bar
}

export enum GameStatus {
  VOTING = 'VOTING',
  REVEALED = 'REVEALED',
}

// Structure for emoji throws - tracks who threw emoji to whom
export interface EmojiThrow {
  id: string; // Unique ID for this throw
  fromPlayerId: string;
  toPlayerId: string;
  emoji: string;
  timestamp: number;
}

export interface GameState {
  sessionId: string;
  status: GameStatus;
  players: Player[];
  average: number | null;
  aiSummary: string | null; // Text generated by Gemini
  emojiThrows: EmojiThrow[]; // Active emoji throws (cleared after animation)
}

export interface SocketMessage {
  type: 'JOIN' | 'VOTE' | 'REVEAL' | 'RESET' | 'SYNC_REQUEST' | 'SYNC_RESPONSE' | 'LEAVE' | 'THROW_EMOJI' | 'HIT_PLAYER';
  payload?: any;
}

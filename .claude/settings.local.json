{
  "permissions": {
    "allow": [
      "Bash(curl:*)",
      "mcp__browsermcp__browser_navigate",
      "mcp__browsermcp__browser_get_console_logs",
      "mcp__chrome-devtools__list_pages",
      "mcp__chrome-devtools__navigate_page",
      "Bash(npm run dev:*)",
      "Bash(kill:*)",
      "mcp__chrome-devtools__list_console_messages",
      "mcp__chrome-devtools__get_console_message",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push)",
      "Bash(git restore:*)",
      "Bash(wrangler secret put:*)",
      "Bash(npm run build:*)",
      "Bash(wrangler pages deployment list:*)",
      "Bash(npm run build:worker:*)",
      "Bash(wrangler deploy:*)",
      "Bash(wrangler pages deploy:*)",
      "Bash(CLOUDFLARE_ACCOUNT_ID=4bfbdd8c267944d0b0cb8d49c862d34f wrangler pages deploy:*)",
      "Bash(CLOUDFLARE_ACCOUNT_ID=4bfbdd8c267944d0b0cb8d49c862d34f wrangler pages list:*)",
      "Bash(CLOUDFLARE_ACCOUNT_ID=4bfbdd8c267944d0b0cb8d49c862d34f wrangler pages project:*)",
      "Bash(git checkout:*)",
      "Bash(git merge:*)",
      "Bash(wrangler secret list:*)",
      "Bash(cat:*)",
      "Bash(gh run watch:*)",
      "Bash(gh run list:*)",
      "Bash(gh label:*)",
      "Bash(gh issue create:*)",
      "Bash(gh api:*)",
      "Bash(# GitHub doesn''t have native sub-issue linking via GraphQL without Projects\n# But we can add cross-references by updating the parent issue body with proper task list syntax\n# that GitHub recognizes as issue links\n\ngh issue edit 1 --body \"\"$(cat <<''EOF''\n## Overview\n\nThis is a **coordinator issue** for Claude Code to track and work through performance optimizations. The application becomes slow and unresponsive when 9+ players are actively throwing emojis.\n\n## Problem Summary\n\nDuring a session with 9 players throwing lots of emojis:\n- Browser became slow and unresponsive\n- Tab reload didn''t fully resolve the issue\n- Multiple compounding performance issues identified\n\n## Root Cause Analysis\n\nThe slowdown is caused by the **compound effect** of multiple issues:\n\n| Issue | Impact | Trigger |\n|-------|--------|---------|\n| emojiThrows array growth | Memory + CPU | Throws not cleaned up |\n| 9 LifeBar intervals | 90 callbacks/sec | Always (9 players) |\n| useFrame on every component | ~1000+ calls/sec | Always |\n| State cascade re-renders | Full tree re-render | Every throw/hit |\n| Html position updates | Layout thrashing | 15+ elements |\n| Stale emoji components | Zombie renders | Network latency |\n\n## Sub-Issues (Work in Order)\n\n- [ ] #2 - ðŸ”´ Critical: Fix emojiThrows array memory leak\n- [ ] #3 - ðŸŸ  High: Optimize LifeBar interval callbacks\n- [ ] #4 - ðŸŸ  High: Optimize useFrame callbacks in 3D components\n- [ ] #5 - ðŸŸ  High: Implement state update batching to reduce re-renders\n- [ ] #6 - ðŸŸ¡ Medium: Optimize Html components in Three.js scene\n- [ ] #7 - ðŸŸ¡ Medium: Fix knockout timeout memory leak\n\n## Acceptance Criteria\n\n- [ ] Application remains responsive with 9+ players\n- [ ] Rapid emoji throwing doesn''t cause slowdowns\n- [ ] Memory usage stays stable over time\n- [ ] No zombie components or stale state\n\n---\n\n> ðŸ¤– This is a Claude Code coordinator issue. Use `/work-on-gh-issue` to process this and its sub-issues.\nEOF\n)\"\")",
      "Bash(gh issue list:*)",
      "Bash(gh issue view:*)",
      "Bash(git push:*)",
      "Bash(gh pr create:*)",
      "Bash(gh pr merge:*)",
      "Bash(git pull:*)",
      "Bash(gh pr view:*)",
      "WebSearch",
      "Bash(gh issue close:*)",
      "Bash(git fetch:*)",
      "Bash(git stash:*)"
    ],
    "deny": [],
    "ask": []
  }
}
